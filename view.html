<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>عرض البيانات</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h2>بياناتك</h2>
    <div id="dataList"></div>

    <nav>
        <a href="dashboard.html">Dashboard</a> |
        <a href="add.html">إضافة بيانات</a> |
        <a href="#" id="logout">تسجيل الخروج</a>
    </nav>

    <script type="module">
        import { auth, logout, getData } from './app.js';

        auth.onAuthStateChanged((user) => {
            if (!user) {
                window.location.href = "index.html";
            } else {
                getData('data/' + user.uid, (data) => {
                    const dataList = document.getElementById('dataList');
                    dataList.innerHTML = '';
                    if (data) {
                        Object.keys(data).forEach(key => {
                            const item = data[key];
                            const div = document.createElement('div');
                            div.innerHTML = `<h3>${item.title}</h3><p>${item.content}</p><small>${new Date(item.timestamp).toLocaleString()}</small><hr>`;
                            dataList.appendChild(div);
                        });
                    } else {
                        dataList.innerHTML = '<p>لا توجد بيانات حالياً.</p>';
                    }
                });
            }
        });

        document.getElementById('logout').addEventListener('click', () => {
            logout();
        });
    </script>
</body>
</html>
